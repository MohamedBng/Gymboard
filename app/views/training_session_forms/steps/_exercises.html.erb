<%= form_with(model: training_session, url: training_session_form_path(training_session), method: :patch, class: "w-full") do |f| %>
  <div class="card bg-base shadow-lg rounded-2xl p-4 md:p-6 mb-6 outline outline-1 outline-gray-300 dark:outline-gray-700">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-6">
      <div class="flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-3 w-full sm:w-auto">
        <h2 class="text-lg sm:text-xl font-bold">
          <%= t("training_sessions.current_session.title") %>
        </h2>
        <span class="text-xs sm:text-sm opacity-60 whitespace-nowrap">
          <%= pluralize(training_session.training_session_exercises.count, 'exercise') %>
        </span>
      </div>
      <button
        type="button"
        onclick="document.getElementById('exercises_modal').showModal()"
        class="btn btn-accent btn-outline btn-sm sm:btn-md md:btn-lg inline-flex items-center gap-1 sm:gap-2 hover:bg-accent-focus hover:shadow-lg hover:shadow-accent/50 hover:scale-105 transition-all duration-300 w-full sm:w-auto shrink-0">
        <i class="fas fa-plus"></i>
        <span class="hidden xs:inline"><%= t("training_sessions.new.add_exercise_button") %></span>
        <span class="inline xs:hidden text-xs"><%= t("training_sessions.new.add_exercise_button_short") %></span>
      </button>
    </div>

    <turbo-frame id="current_session">
      <%= render "training_session_forms/form_content", training_session: training_session, f: f %>
    </turbo-frame>

    <div class="mt-6 flex gap-4">
      <%= f.button type: "submit", class: "btn btn-accent btn-lg gap-2 w-full" do %>
        <%= t("common.continue") %>
        <i class="fa-solid fa-arrow-right"></i>
      <% end %>
    </div>
  </div>
<% end %>

<%= render partial: 'training_session_forms/training_session_exercises/exercises_modal', locals: { training_session: training_session, exercises: exercises } %>

